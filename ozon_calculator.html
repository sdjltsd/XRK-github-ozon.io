<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ozon 成本计算器</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        .content-wrapper {
            display: flex;
            gap: 30px;
        }
        
        .form-section {
            flex: 1;
            min-width: 300px;
        }
        
        .results-section {
            flex: 1;
            min-width: 300px;
            margin-top: 0;
        }
        
        .results-section:last-child {
            margin-top: 30px;
        }
        
        .results-wrapper {
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        
        .form-section {
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        
        input[type="number"], select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .results-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
        }
        
        .result-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 4px;
        }
        
        .result-label {
            font-weight: bold;
            color: #555;
        }
        
        .result-value {
            color: #333;
        }
        
        .calculate-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
        }
        
        .calculate-btn:hover {
            background-color: #45a049;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            padding-bottom: 5px;
            border-bottom: 1px solid #ddd;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 15px;
            }
            
            .content-wrapper {
                flex-direction: column;
            }
            
            .form-section, 
            .results-wrapper,
            .results-section {
                min-width: 100%;
            }
            
            h1 {
                font-size: 24px;
                margin-bottom: 20px;
            }
            
            .result-row {
                flex-direction: column;
                gap: 5px;
            }
            
            .result-label {
                margin-bottom: 2px;
            }
            
            .result-value {
                text-align: right;
            }
            
            .recommendation-row {
                flex-direction: column;
                align-items: flex-start;
                margin-bottom: 15px;
                padding-bottom: 10px;
                border-bottom: 1px dashed #ddd;
            }
            
            .recommendation-row:last-child {
                border-bottom: none;
                margin-bottom: 0;
            }
            
            .rec-label {
                margin-bottom: 5px;
                color: #2196F3;
            }
            
            .rec-values {
                flex-direction: column;
                gap: 5px;
                width: 100%;
                padding-left: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Ozon 成本计算器</h1>
        
        <div class="content-wrapper">
            <div class="form-section">
                <div class="form-group">
                    <label for="costPrice">成本价 (CNY)</label>
                    <input type="number" id="costPrice" step="0.01" placeholder="请输入成本价">
                </div>
                
                <div class="form-group">
                    <label for="weight">克重 (g)</label>
                    <input type="number" id="weight" step="1" placeholder="请输入克重">
                </div>
                
                <div class="form-group">
                    <label for="logistics">物流方式</label>
                    <select id="logistics">
                        <option value="china_post_pudo_economy">China Post to PUDO Economy</option>
                        <option value="ets_land">ETS-陆运-到门</option>
                        <option value="unl_standard_extra_small">UNl Standard Extra Small UNl</option>
                        <option value="cel_standard_extra_small">CEL Standard Extra Small</option>
                        <option value="cel_economy_extra_small">CEL Economy Extra Small</option>
                        <option value="china_post_pudo_standard">China Post to PUDO Standard</option>
                        <option value="cel_standard_budget">CEL Standard Budget</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="competitorPrice">同行价 (RUB)</label>
                    <input type="number" id="competitorPrice" step="0.01" placeholder="请输入同行价">
                </div>
                
                <div class="form-group">
                <label for="settingIndex">设置指数</label>
                <select id="settingIndex">
                    <option value="1.02">1.02 (有利)</option>
                    <option value="1.03">1.03 (中等)</option>
                    <option value="1.04">1.04 (中等)</option>
                    <option value="1.05">1.05 (中等)</option>
                    <option value="1.06">1.06 (不利)</option>
                    <option value="1.08">1.08 (不利)</option>
                    <option value="1.10">1.10 (不利)</option>
                </select>
            </div>
                
                <div class="form-group">
                <label for="settingPrice">设置售价 (CNY)</label>
                <input type="number" id="settingPrice" step="0.01" placeholder="请输入设置售价" style="border-color: #2196F3; box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.2);">
            </div>
                
                <div class="form-group">
                    <label for="targetProfitRate">目标利润率 (%)</label>
                    <input type="number" id="targetProfitRate" step="1" min="1" max="100" value="25" placeholder="请输入目标利润率">
                </div>
                
                <div class="form-group">
                    <label for="minProfit">保底利润 (CNY)</label>
                    <input type="number" id="minProfit" step="0.01" min="0" value="1" placeholder="请输入保底利润">
                </div>
                
                <button class="calculate-btn" onclick="calculate()">计算</button>
                <button class="calculate-btn" style="margin-top: 10px; background-color: #2196F3;" onclick="saveCurrentResult()">保存记录</button>
            </div>
            
            <div class="results-wrapper">
                <div class="results-section">
                    <div class="section-title">计算结果</div>
                    
                    <div class="result-row">
                        <span class="result-label">转换后人民币价格 (CNY):</span>
                        <span class="result-value" id="convertedPrice">-</span>
                    </div>
                    
                    <div class="result-row">
                        <span class="result-label">同行指数:</span>
                        <span class="result-value" id="competitorIndex">-</span>
                    </div>
                    
                    <div class="result-row">
                        <span class="result-label">运费 (CNY):</span>
                        <span class="result-value" id="shippingFee">-</span>
                    </div>
                    
                    <div class="result-row">
                        <span class="result-label">结算价格 (CNY):</span>
                        <span class="result-value" id="settlementPrice">-</span>
                    </div>
                    
                    <div class="result-row">
                        <span class="result-label">实际利润 (CNY):</span>
                        <span class="result-value" id="actualProfit">-</span>
                    </div>
                    
                    <div class="result-row">
                        <span class="result-label">实际利润率 (%):</span>
                        <span class="result-value" id="actualProfitRate">-</span>
                    </div>
                </div>
                
                <div class="results-section">
                    <div class="section-title">推荐售价</div>
                    
                    <div class="recommendation-box">
                        <div class="recommendation-row">
                            <span class="rec-label">基础推荐:</span>
                            <div class="rec-values">
                                <span><span id="recommendedPrice">-</span> CNY</span>
                                <span>利润率：<span id="recommendedProfitRate">-</span> %</span>
                                <span>同行指数：<span id="recommendedIndex">-</span></span>
                            </div>
                        </div>
                        <div class="recommendation-row">
                            <span class="rec-label">20%利润:</span>
                            <div class="rec-values">
                                <span><span id="profit20Price">-</span> CNY</span>
                                <span>利润率：<span id="profit20Rate">-</span> %</span>
                                <span>同行指数：<span id="profit20Index">-</span></span>
                            </div>
                        </div>
                        <div class="recommendation-row">
                            <span class="rec-label">30%利润:</span>
                            <div class="rec-values">
                                <span><span id="profit30Price">-</span> CNY</span>
                                <span>利润率：<span id="profit30Rate">-</span> %</span>
                                <span>同行指数：<span id="profit30Index">-</span></span>
                            </div>
                        </div>
                        <div class="recommendation-row">
                            <span class="rec-label">目标利润:</span>
                            <div class="rec-values">
                                <span><span id="targetProfitPrice">-</span> CNY</span>
                                <span>利润率：<span id="targetProfitRateDisplay">-</span> %</span>
                                <span>同行指数：<span id="targetProfitIndex">-</span></span>
                            </div>
                        </div>
                        <div class="recommendation-row">
                            <span class="rec-label">保底利润:</span>
                            <div class="rec-values">
                                <span><span id="minProfitPrice">-</span> CNY</span>
                                <span>利润率：<span id="minProfitRate">-</span> %</span>
                                <span>同行指数：<span id="minProfitIndex">-</span></span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="results-section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <div class="section-title" style="margin: 0;">历史记录</div>
                        <div style="display: flex; gap: 10px;">
                            <button onclick="toggleHistory()" style="padding: 5px 10px; background-color: #2196F3; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">收起</button>
                            <button onclick="clearHistory()" style="padding: 5px 10px; background-color: #f44336; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">清空历史</button>
                        </div>
                    </div>
                    
                    <div id="historyList" style="max-height: 300px; overflow-y: auto;">
                        <div style="text-align: center; color: #999; padding: 20px;">暂无历史记录</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // 汇率：1 卢布 = 0.08 人民币（可根据实际情况调整）
        const EXCHANGE_RATE = 0.088671;
        
        // 运费计算公式
        function calculateShippingFee(logistics, weight) {
            switch(logistics) {
                case 'china_post_pudo_economy':
                    return 1.93 + weight * 0.026;
                case 'ets_land':
                    return 1.73 + weight * 0.034;
                case 'unl_standard_extra_small':
                    return 3 + weight * 0.035;
                case 'cel_standard_extra_small':
                    return 3 + weight * 0.035;
                case 'cel_economy_extra_small':
                    return 3 + weight * 0.025;
                case 'china_post_pudo_standard':
                    return 1.9 + weight * 0.067;
                case 'cel_standard_budget':
                    return 23 + weight * 0.025;
                default:
                    return 0;
            }
        }
        
        // 计算利润20-30%的推荐售价
        function calculateProfitPrice(costPrice, shippingFee, profitRate) {
            // 推导公式：
            // 实际利润率 = (结算价格 - 成本价) / 成本价 = r
            // 结算价格 = P - 0.07P - 1.5 - 运费 - 0.12P = 0.81P - 1.5 - 运费
            // 代入得：(0.81P - 1.5 - 运费 - 成本价) / 成本价 = r
            // 解得：P = [成本价 × (1 + r) + 1.5 + 运费] / 0.81
            const totalCost = costPrice * (1 + profitRate) + shippingFee + 1.5; // 加上中转费用
            return totalCost / 0.81; // 0.81 = 1 - 0.07 - 0.12
        }
        
        // 计算保底利润推荐售价
        function calculateMinProfitPrice(costPrice, shippingFee, minProfit) {
            // 推导公式：
            // 实际利润 = 结算价格 - 成本价 = 保底利润
            // 结算价格 = P - 0.07P - 1.5 - 运费 - 0.12P = 0.81P - 1.5 - 运费
            // 代入得：0.81P - 1.5 - 运费 - 成本价 = 保底利润
            // 解得：P = (成本价 + 保底利润 + 1.5 + 运费) / 0.81
            const totalCost = costPrice + minProfit + shippingFee + 1.5; // 加上中转费用
            return totalCost / 0.81; // 0.81 = 1 - 0.07 - 0.12
        }
        
        // 计算利润率
        function calculateProfitRate(sellingPrice, costPrice, shippingFee) {
            // 结算价格 = P - 0.07P - 1.5 - 运费 - 0.12P = 0.81P - 1.5 - 运费
            const settlementPrice = 0.81 * sellingPrice - 1.5 - shippingFee;
            // 实际利润 = 结算价格 - 成本价
            const actualProfit = settlementPrice - costPrice;
            // 实际利润率 = 实际利润 / 成本价
            return costPrice > 0 ? actualProfit / costPrice : 0;
        }
        
        // 保存历史记录
        function saveHistory(costPrice, weight, logistics, competitorPrice, settingIndex, settingPrice, targetProfitRate, minProfit, results) {
            // 获取历史记录
            let history = JSON.parse(localStorage.getItem('ozonCalculatorHistory') || '[]');
            
            // 创建历史记录项
            const historyItem = {
                id: Date.now(),
                timestamp: new Date().toLocaleString(),
                inputs: {
                    costPrice,
                    weight,
                    logistics,
                    competitorPrice,
                    settingIndex,
                    settingPrice,
                    targetProfitRate,
                    minProfit
                },
                results
            };
            
            // 添加到历史记录开头
            history.unshift(historyItem);
            
            // 限制历史记录数量为5条
            if (history.length > 5) {
                history = history.slice(0, 5);
            }
            
            // 保存到localStorage
            localStorage.setItem('ozonCalculatorHistory', JSON.stringify(history));
            
            // 更新历史记录显示
            displayHistory();
        }
        
        // 显示历史记录
        function displayHistory() {
            const history = JSON.parse(localStorage.getItem('ozonCalculatorHistory') || '[]');
            const historyList = document.getElementById('historyList');
            
            if (history.length === 0) {
                historyList.innerHTML = '<div style="text-align: center; color: #999; padding: 20px;">暂无历史记录</div>';
                return;
            }
            
            let html = '';
            history.forEach(item => {
                html += `
                    <div onclick="fillFormWithHistory(${JSON.stringify(item.inputs).replace(/"/g, '&quot;')})" style="border: 1px solid #ddd; border-radius: 4px; margin-bottom: 10px; padding: 10px; cursor: pointer; transition: background-color 0.2s;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <div style="font-size: 12px; color: #999;">${item.timestamp}</div>
                            <button onclick="event.stopPropagation(); deleteHistoryItem(${item.id})" style="padding: 2px 8px; background-color: #f44336; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 10px;">删除</button>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 5px; font-size: 12px;">
                            <div><strong>成本价:</strong> ${item.inputs.costPrice.toFixed(2)} CNY</div>
                            <div><strong>克重:</strong> ${item.inputs.weight} g</div>
                            <div><strong>同行价:</strong> ${item.inputs.competitorPrice.toFixed(2)} RUB</div>
                            <div><strong>设置售价:</strong> ${item.inputs.settingPrice.toFixed(2)} CNY</div>
                            <div><strong>实际利润:</strong> ${item.results.actualProfit.toFixed(2)} CNY</div>
                            <div><strong>实际利润率:</strong> ${(item.results.actualProfitRate * 100).toFixed(2)}%</div>
                        </div>
                    </div>
                `;
            });
            
            historyList.innerHTML = html;
        }
        
        // 清空历史记录
        function clearHistory() {
            if (confirm('确定要清空历史记录吗？')) {
                localStorage.removeItem('ozonCalculatorHistory');
                displayHistory();
            }
        }
        
        // 删除单个历史记录项
        function deleteHistoryItem(id) {
            if (confirm('确定要删除这条历史记录吗？')) {
                let history = JSON.parse(localStorage.getItem('ozonCalculatorHistory') || '[]');
                // 过滤掉指定ID的记录
                history = history.filter(item => item.id !== id);
                // 保存过滤后的历史记录
                localStorage.setItem('ozonCalculatorHistory', JSON.stringify(history));
                // 更新显示
                displayHistory();
            }
        }
        
        // 将历史记录填充到表单
        function fillFormWithHistory(inputs) {
            // 填充表单输入
            document.getElementById('costPrice').value = inputs.costPrice;
            document.getElementById('weight').value = inputs.weight;
            document.getElementById('logistics').value = inputs.logistics;
            document.getElementById('competitorPrice').value = inputs.competitorPrice;
            document.getElementById('settingIndex').value = inputs.settingIndex;
            document.getElementById('settingPrice').value = inputs.settingPrice;
            document.getElementById('targetProfitRate').value = inputs.targetProfitRate;
            document.getElementById('minProfit').value = inputs.minProfit;
            
            // 滚动到表单顶部，方便用户查看
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // 保存当前结果
        function saveCurrentResult() {
            // 获取输入值
            const costPrice = parseFloat(document.getElementById('costPrice').value) || 0;
            const weight = parseFloat(document.getElementById('weight').value) || 0;
            const logistics = document.getElementById('logistics').value;
            const competitorPrice = parseFloat(document.getElementById('competitorPrice').value) || 0;
            const settingIndex = parseFloat(document.getElementById('settingIndex').value) || 1;
            const settingPrice = parseFloat(document.getElementById('settingPrice').value) || 0;
            const targetProfitRate = parseFloat(document.getElementById('targetProfitRate').value) || 25;
            const minProfit = parseFloat(document.getElementById('minProfit').value) || 1;
            
            // 计算转换后人民币价格
            const convertedPrice = competitorPrice * EXCHANGE_RATE;
            
            // 计算推荐售价
            const recommendedPrice = convertedPrice * settingIndex;
            
            // 计算同行指数
            let competitorIndex = 0;
            if (settingPrice > 0 && convertedPrice > 0) {
                if (settingPrice < convertedPrice) {
                    // Ozon的价格低于竞争对手的价格
                    competitorIndex = settingPrice / convertedPrice;
                } else {
                    // Ozon的价格高于竞争对手的价格
                    competitorIndex = 2 - (convertedPrice / settingPrice);
                }
            }
            
            // 计算运费
            const shippingFee = calculateShippingFee(logistics, weight);
            
            // 计算结算价格
            const settlementPrice = settingPrice - (settingPrice * 0.07) - 1.5 - shippingFee - (settingPrice * 0.12);
            
            // 计算实际利润
            const actualProfit = settlementPrice - costPrice;
            
            // 计算实际利润率
            const actualProfitRate = costPrice > 0 ? actualProfit / costPrice : 0;
            
            // 计算利润20-30%的推荐售价
            const profit20Price = calculateProfitPrice(costPrice, shippingFee, 0.2);
            const profit30Price = calculateProfitPrice(costPrice, shippingFee, 0.3);
            
            // 计算目标利润率的推荐售价
            const targetProfitPrice = calculateProfitPrice(costPrice, shippingFee, targetProfitRate / 100);
            
            // 计算保底利润的推荐售价
            const minProfitPrice = calculateMinProfitPrice(costPrice, shippingFee, minProfit);
            
            // 计算各种推荐售价的利润率
            const recommendedProfitRate = calculateProfitRate(recommendedPrice, costPrice, shippingFee);
            const minProfitRate = calculateProfitRate(minProfitPrice, costPrice, shippingFee);
            
            // 保存历史记录
            const results = {
                convertedPrice,
                recommendedPrice,
                competitorIndex,
                shippingFee,
                settlementPrice,
                actualProfit,
                actualProfitRate,
                profit20Price,
                profit30Price,
                targetProfitPrice,
                minProfitPrice,
                recommendedProfitRate,
                minProfitRate
            };
            
            saveHistory(costPrice, weight, logistics, competitorPrice, settingIndex, settingPrice, targetProfitRate, minProfit, results);
            
            // 显示保存成功提示
            alert('记录保存成功！');
        }
        
        // 主计算函数
        function calculate() {
            // 获取输入值
            const costPrice = parseFloat(document.getElementById('costPrice').value) || 0;
            const weight = parseFloat(document.getElementById('weight').value) || 0;
            const logistics = document.getElementById('logistics').value;
            const competitorPrice = parseFloat(document.getElementById('competitorPrice').value) || 0;
            const settingIndex = parseFloat(document.getElementById('settingIndex').value) || 1;
            const settingPrice = parseFloat(document.getElementById('settingPrice').value) || 0;
            const targetProfitRate = parseFloat(document.getElementById('targetProfitRate').value) || 25;
            const minProfit = parseFloat(document.getElementById('minProfit').value) || 1;
            
            // 计算转换后人民币价格
            const convertedPrice = competitorPrice * EXCHANGE_RATE;
            
            // 计算推荐售价
            const recommendedPrice = convertedPrice * settingIndex;
            
            // 计算同行指数
            let competitorIndex = 0;
            if (settingPrice > 0 && convertedPrice > 0) {
                if (settingPrice < convertedPrice) {
                    // Ozon的价格低于竞争对手的价格
                    competitorIndex = settingPrice / convertedPrice;
                } else {
                    // Ozon的价格高于竞争对手的价格
                    competitorIndex = 2 - (convertedPrice / settingPrice);
                }
            }
            
            // 计算运费
            const shippingFee = calculateShippingFee(logistics, weight);
            
            // 计算结算价格
            const settlementPrice = settingPrice - (settingPrice * 0.07) - 1.5 - shippingFee - (settingPrice * 0.12);
            
            // 计算实际利润
            const actualProfit = settlementPrice - costPrice;
            
            // 计算实际利润率
            const actualProfitRate = costPrice > 0 ? actualProfit / costPrice : 0;
            
            // 计算利润20-30%的推荐售价
            const profit20Price = calculateProfitPrice(costPrice, shippingFee, 0.2);
            const profit30Price = calculateProfitPrice(costPrice, shippingFee, 0.3);
            
            // 计算目标利润率的推荐售价
            const targetProfitPrice = calculateProfitPrice(costPrice, shippingFee, targetProfitRate / 100);
            
            // 计算保底利润的推荐售价
            const minProfitPrice = calculateMinProfitPrice(costPrice, shippingFee, minProfit);
            
            // 计算各种推荐售价的利润率
            const recommendedProfitRate = calculateProfitRate(recommendedPrice, costPrice, shippingFee);
            const minProfitRate = calculateProfitRate(minProfitPrice, costPrice, shippingFee);
            
            // 计算各种推荐售价的同行指数
            function calculateRecommendedIndex(price) {
                if (price > 0 && convertedPrice > 0) {
                    if (price < convertedPrice) {
                        // Ozon的价格低于竞争对手的价格
                        return price / convertedPrice;
                    } else {
                        // Ozon的价格高于竞争对手的价格
                        return 2 - (convertedPrice / price);
                    }
                }
                return 0;
            }
            
            const recommendedIndex = calculateRecommendedIndex(recommendedPrice);
            const profit20Index = calculateRecommendedIndex(profit20Price);
            const profit30Index = calculateRecommendedIndex(profit30Price);
            const targetProfitIndex = calculateRecommendedIndex(targetProfitPrice);
            const minProfitIndex = calculateRecommendedIndex(minProfitPrice);
            
            // 显示结果
            document.getElementById('convertedPrice').textContent = convertedPrice.toFixed(2);
            document.getElementById('recommendedPrice').textContent = recommendedPrice.toFixed(2);
            document.getElementById('competitorIndex').textContent = competitorIndex.toFixed(4);
            document.getElementById('shippingFee').textContent = shippingFee.toFixed(2);
            document.getElementById('settlementPrice').textContent = settlementPrice.toFixed(2);
            document.getElementById('actualProfit').textContent = actualProfit.toFixed(2);
            document.getElementById('actualProfitRate').textContent = (actualProfitRate * 100).toFixed(2);
            document.getElementById('profit20Price').textContent = profit20Price.toFixed(2);
            document.getElementById('profit30Price').textContent = profit30Price.toFixed(2);
            document.getElementById('targetProfitPrice').textContent = targetProfitPrice.toFixed(2);
            document.getElementById('minProfitPrice').textContent = minProfitPrice.toFixed(2);
            
            // 显示利润率
            document.getElementById('recommendedProfitRate').textContent = (recommendedProfitRate * 100).toFixed(2);
            document.getElementById('profit20Rate').textContent = '20.00';
            document.getElementById('profit30Rate').textContent = '30.00';
            document.getElementById('targetProfitRateDisplay').textContent = targetProfitRate.toFixed(2);
            document.getElementById('minProfitRate').textContent = (minProfitRate * 100).toFixed(2);
            
            // 显示同行指数
            document.getElementById('recommendedIndex').textContent = recommendedIndex.toFixed(4);
            document.getElementById('profit20Index').textContent = profit20Index.toFixed(4);
            document.getElementById('profit30Index').textContent = profit30Index.toFixed(4);
            document.getElementById('targetProfitIndex').textContent = targetProfitIndex.toFixed(4);
            document.getElementById('minProfitIndex').textContent = minProfitIndex.toFixed(4);
        }
        
        // 切换历史记录的显示/隐藏
        function toggleHistory() {
            const historyList = document.getElementById('historyList');
            const toggleButton = event.target;
            
            if (historyList.style.display === 'none') {
                // 展开历史记录
                historyList.style.display = 'block';
                toggleButton.textContent = '收起';
            } else {
                // 收起历史记录
                historyList.style.display = 'none';
                toggleButton.textContent = '展开';
            }
        }
        
        // 页面加载时显示历史记录
        window.onload = function() {
            displayHistory();
        };
    </script>
</body>
</html>
